(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{182:function(e,t,c){},214:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(31),a=c.n(s),o=c(19),r=(c(182),c(75)),i=c(38),d=c.n(i),j=c(105);c(215),c(185);j.a.initializeApp({apiKey:"AIzaSyCEbLpFzh1MNMzMyxCkYwl8HQ_4v2-B_OY",authDomain:"todo-app-d29df.firebaseapp.com",projectId:"todo-app-d29df",storageBucket:"todo-app-d29df.appspot.com",messagingSenderId:"895052913366",appId:"1:895052913366:web:e5ddf5832ad2c1f0f24777"});var l=j.a.auth(),u=j.a;var b=c(8),O=Object(n.createContext)();function m(e){var t=e.children,c="today",s=Object(n.useState)(c),a=Object(o.a)(s,2),i=a[0],j=a[1],l=Object(n.useState)(void 0),m=Object(o.a)(l,2),h=m[0],f=m[1],x=Object(n.useState)(),p=Object(o.a)(x,2),v=p[0],g=p[1],N=function(e){var t=Object(n.useState)([]),c=Object(o.a)(t,2),s=c[0],a=c[1];return Object(n.useEffect)((function(){var t=u.firestore().collection("users/".concat(e,"/todos")).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(r.a)({id:e.id},e.data())}));a(t)}));return function(){return t()}}),[e]),s}(v),S=function(e,t){var c=Object(n.useState)([]),s=Object(o.a)(c,2),a=s[0],i=s[1];return Object(n.useEffect)((function(){var c=t.map((function(t){return Object(r.a)({numOfTodos:e.filter((function(e){return e.projectName===t.name&&!e.checked})).length},t)}));i(c)}),[e,t]),a}(N,function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){var e=u.firestore().collection("projects").onSnapshot((function(e){var t=e.docs.map((function(e){return{userID:e.data().UserId,id:e.id,name:e.data().name}}));s(t)}));return function(){return e()}}),[]),c}()),y=function(e,t,c){var s=Object(n.useState)([]),a=Object(o.a)(s,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){var c,n=d()().format("DD/MM/YYYY");c="today"===t?e.filter((function(e){return e.date===n})):"next 7 days"===t?e.filter((function(e){var t=d()(e.date,"DD/MM/YYYY"),c=d()(n,"DD/MM/YYYY"),s=t.diff(c,"days");return s>=0&&s<7})):"all days"===t?e:e.filter((function(e){return e.projectName===t})),i(c)}),[e,t]),r}(N,i);return Object(b.jsx)(O.Provider,{value:{UID:v,setUID:g,defaultProject:c,selectedProject:i,setSelectedProject:j,todos:y,projects:S,selectedTodo:h,setSelectedTodo:f},children:t})}var h=function(e){var t=e.children,c=Object(n.useRef)(),s=Object(n.useContext)(O).setSelectedTodo;Object(n.useEffect)((function(){return document.addEventListener("click",a),function(){return document.removeEventListener("click",a)}}),[]);var a=function(e){null!=c.current?(e.target===c.current||c.current.contains(e.target))&&s(!1):console.log("null")};return Object(b.jsx)("div",{className:"Sidebar",ref:c,children:t})};var f=function(e){var t=e.children;return Object(b.jsx)("div",{className:"Main",children:t})},x=c.p+"static/media/frog.daaed11b.png",p=c(39);var v=function(){var e=Object(n.useContext)(O),t=(e.UID,e.setUID);return Object(b.jsxs)("div",{className:"User",children:[Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)("img",{src:x,alt:"logo"})}),Object(b.jsxs)("div",{className:"info",children:[Object(b.jsx)("p",{children:"Alex Tran's TODO"}),Object(b.jsx)("a",{onClick:function(){var e=Object(p.g)();Object(p.m)(e),t(void 0),localStorage.removeItem("UserId")},href:"#",children:"Logout!"})]}),Object(b.jsx)("div",{className:"small",children:Object(b.jsx)("h1",{children:" Sorry this application is not supported on smaller screens!"})})]})},g=c(33);var N=function(e){var t=e.children,c=e.showModal,s=e.setShowModal,a=Object(n.useRef)(),o=Object(g.useSpring)({opacity:c?1:0,top:c?"25%":"0%",config:{friction:10}});return c&&Object(b.jsx)("div",{className:"Modal",ref:a,onClick:function(e){e.target===a.current&&s(!1)},children:Object(b.jsx)(g.animated.div,{style:o,className:"container",children:t})})},S=c(241),y=c(242),D=c(250),C=c(251),k=c(252),w=c(37),T=c(243),M=c(264),I=c(144);var Y=function(e){var t=e.handleSubmit,c=e.heading,n=void 0!==c&&c,s=e.text,a=e.setText,o=e.day,r=e.setDay,i=e.time,d=e.setTime,j=e.todoProject,l=e.setTodoProject,u=e.projects,O=e.showButtons,m=void 0!==O&&O,h=e.setShowModal,f=void 0!==h&&h;return Object(b.jsx)(w.a,{utils:I.a,children:Object(b.jsxs)("form",{onSubmit:t,className:"TodoForm",children:[Object(b.jsxs)("div",{className:"text",children:[n&&Object(b.jsx)("h3",{children:n}),Object(b.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)},placeholder:"To do ...",autoFocus:!0})]}),Object(b.jsxs)("div",{className:"remind",children:[Object(b.jsx)(S.a,{}),Object(b.jsx)("p",{children:"Remind Me!"})]}),Object(b.jsxs)("div",{className:"pick-day",children:[Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)(y.a,{}),Object(b.jsx)("p",{children:"Choose a day"})]}),Object(b.jsx)(T.a,{value:o,onChange:function(e){return r(e)}})]}),Object(b.jsxs)("div",{className:"pick-time",children:[Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)(D.a,{}),Object(b.jsx)("p",{children:"Choose time"})]}),Object(b.jsx)(M.a,{value:i,onChange:function(e){return d(e)}})]}),Object(b.jsxs)("div",{className:"pick-project",children:[Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)(C.a,{}),Object(b.jsx)("p",{children:"Choose a project"})]}),Object(b.jsx)("div",{className:"projects",children:u.length>0?u.map((function(e){return Object(b.jsx)("div",{className:"project ".concat(j===e.name?"active":""),onClick:function(){return l(e.name)},children:e.name},e.id)})):Object(b.jsx)("div",{style:{color:"#ff0000"},children:"Please add a project before proceeding"})})]}),m&&Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"cancel",onClick:function(){return f(!1)},children:Object(b.jsx)(k.a,{size:"40"})}),Object(b.jsx)("div",{className:"confirm",children:Object(b.jsx)("button",{children:"+ Add to do"})})]})]})})},P=["today","next 7 days","all days"],E=c(164),U=c.n(E);var A=function(){var e=Object(n.useContext)(O),t=e.projects,c=e.selectedProject,s=e.UID,a=Object(n.useState)(!1),r=Object(o.a)(a,2),i=r[0],j=r[1],l=Object(n.useState)(""),m=Object(o.a)(l,2),h=m[0],f=m[1],x=Object(n.useState)(new Date),p=Object(o.a)(x,2),v=p[0],g=p[1],S=Object(n.useState)(new Date),y=Object(o.a)(S,2),D=y[0],C=y[1],k=Object(n.useState)(c),w=Object(o.a)(k,2),T=w[0],M=w[1];Object(n.useEffect)((function(){M(c)}),[c]);var I=t.filter((function(e){return e.userID==s}));return Object(b.jsxs)("div",{className:"AddNewTodo",children:[Object(b.jsx)("div",{className:"btn",children:Object(b.jsx)("button",{onClick:function(){return j(!0)},children:"+ New Todo"})}),Object(b.jsx)(N,{showModal:i,setShowModal:j,children:Object(b.jsx)(Y,{handleSubmit:function(e){e.preventDefault(),h&&!P.includes(T)&&(u.firestore().collection("users/".concat(s,"/todos")).add({text:h,date:d()(v).format("DD/MM/YYYY"),day:d()(v).format("d"),time:d()(D).format("hh:mm A"),checked:!1,color:U()({luminosity:"dark"}),projectName:T}),j(!1),f(""),g(new Date),C(new Date))},heading:"Add new to do!",text:h,setText:f,day:v,setDay:g,time:D,setTime:C,todoProject:T,setTodoProject:M,projects:I,showButtons:!0,setShowModal:j})})]})},z=c(253),F=c(254);var B=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useContext)(O).setSelectedProject,r=Object(g.useSpring)({transform:c?"rotate(0deg)":"rotate(180deg)",config:{friction:10}}),i=Object(g.useSpring)({display:c?"block":"none",lineHeight:c?1.2:0});return Object(b.jsxs)("div",{className:"Calendar",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)(z.a,{size:"18"}),Object(b.jsx)("p",{children:"Calendar"})]}),Object(b.jsx)(g.animated.div,{style:r,onClick:function(){return s(!c)},className:"btns",children:Object(b.jsx)("span",{children:Object(b.jsx)(F.a,{size:"20"})})})]}),Object(b.jsx)(g.animated.div,{style:i,className:"items",children:P.map((function(e){return Object(b.jsx)("div",{className:"item",onClick:function(){return a(e)},children:e},e)}))})]})},L=c(258);var R=function(e){var t=e.handleSubmit,c=e.heading,n=e.value,s=e.setValue,a=e.setShowModal,o=e.confirmButtonText;return Object(b.jsxs)("form",{onSubmit:t,className:"ProjectForm",children:[Object(b.jsx)("h3",{children:c}),Object(b.jsx)("input",{value:n,onChange:function(e){return s(e.target.value)},type:"text",placeholder:"project name...",autoFocus:!0}),Object(b.jsx)("button",{className:"cancel",role:"button",onClick:function(){return a(!1)},children:"cancel"}),Object(b.jsx)("button",{className:"confirm",children:o})]})},_=c(255);var G=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(o.a)(a,2),i=r[0],d=r[1],j=Object(n.useContext)(O).UID;return Object(b.jsxs)("div",{className:"AddNewProject",children:[Object(b.jsx)("div",{className:"add-button",children:Object(b.jsx)("span",{onClick:function(){return s(!0)},children:Object(b.jsx)(_.a,{size:"20"})})}),Object(b.jsx)(N,{showModal:c,setShowModal:s,children:Object(b.jsx)(R,{handleSubmit:function(e){e.preventDefault(),j&&u.firestore().collection("projects").add({name:i,UserId:j}),s(!1),d("")},heading:"New project!",value:i,setValue:d,setShowModal:s,confirmButtonText:"+ Add Project"})})]})},H=c(256),V=c(257);var J=function(e){var t=e.project,c=e.setShowModal,s=Object(n.useState)(t.name),a=Object(o.a)(s,2),r=a[0],i=a[1],d=Object(n.useContext)(O),j=d.selectedProject,l=d.setSelectedProject,m=d.UID;return Object(b.jsx)("div",{className:"RenameProject",children:Object(b.jsx)(R,{handleSubmit:function(e){e.preventDefault(),function(e,t){var c=u.firestore().collection("projects"),n=u.firestore().collection("users/".concat(m,"/todos")),s=e.name;c.where("name","==",t).get().then((function(a){c.doc(e.id).update({name:t}).then((function(){n.where("projectName","==",s).get().then((function(e){e.forEach((function(e){e.ref.update({projectName:t})}))})).then((function(){j===s&&l(t)}))}))}))}(t,r),c(!1)},heading:"Edit project name!",value:r,setValue:i,setShowModal:c,confirmButtonText:"Confirm"})})};var K=function(e){var t=e.project,c=e.edit,s=Object(n.useContext)(O),a=s.defaultProject,r=s.selectedProject,i=s.setSelectedProject,d=s.UID,j=Object(n.useState)(!1),l=Object(o.a)(j,2),m=l[0],h=l[1],f=Object(g.useSpring)({from:{marginTop:"-12px",opacity:0},to:{marginTop:"0px",opacity:1}}),x=Object(g.useTransition)(c,{from:{opacity:0,right:"-20px"},enter:{opacity:1,right:"0px"},leave:{opacity:0,right:"-20px"}});return Object(b.jsxs)(g.animated.div,{style:f,className:"Project",children:[Object(b.jsx)("div",{className:"name",onClick:function(){return i(t.name)},children:t.name}),Object(b.jsx)("div",{className:"btns",children:x((function(e,c){return c?Object(b.jsxs)(g.animated.div,{style:e,className:"edit-delete",children:[Object(b.jsx)("span",{className:"edit",onClick:function(){return h(!0)},children:Object(b.jsx)(H.a,{size:"13"})}),Object(b.jsx)("span",{className:"delete",onClick:function(){return function(e){u.firestore().collection("projects").doc(e.id).delete().then((function(){u.firestore().collection("users/".concat(d,"/todos")).where("projectName","==",e.name).get().then((function(e){e.forEach((function(e){e.ref.delete()}))}))})).then((function(){r===e.name&&i(a)}))}(t)},children:Object(b.jsx)(V.a,{size:"13"})})]}):0===t.numOfTodos?"":Object(b.jsx)(g.animated.div,{style:e,className:"total-todos",children:t.numOfTodos})}))}),Object(b.jsx)(N,{showModal:m,setShowModal:h,children:Object(b.jsx)(J,{project:t,setShowModal:h})})]})};var Q=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(o.a)(a,2),i=r[0],d=r[1],j=i?"#1EC94C":"#000000",l=Object(n.useContext)(O),u=l.projects,m=l.UID,h=Object(g.useSpring)({transform:c?"rotate(0deg)":"rotate(180deg)",config:{friction:10}}),f=Object(g.useSpring)({display:c?"block":"none",lineHeight:c?1.2:0});return Object(b.jsxs)("div",{className:"Projects",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsxs)("div",{className:"title",children:[Object(b.jsx)(C.a,{size:"18"}),Object(b.jsx)("p",{children:"Projects"})]}),Object(b.jsxs)("div",{className:"btns",children:[c&&u.length>0&&Object(b.jsx)("span",{className:"edit",onClick:function(){return d((function(e){return!e}))},children:Object(b.jsx)(L.a,{size:"15",color:j})}),Object(b.jsx)(G,{}),Object(b.jsx)(g.animated.span,{className:"arrow",onClick:function(){return s(!c)},style:h,children:Object(b.jsx)(F.a,{size:"20"})})]})]}),Object(b.jsx)(g.animated.div,{style:f,className:"items",children:u.filter((function(e){return e.userID==m})).map((function(e){return Object(b.jsx)(K,{project:e,edit:i},e.id)}))})]})},W=c(259),q=c(260),X=c(261),Z=c(262);var $=function(e){var t=e.todo,c=Object(n.useState)(!1),s=Object(o.a)(c,2),a=s[0],i=s[1],j=Object(n.useContext)(O),l=j.selectedTodo,m=j.setSelectedTodo,h=j.UID,f=function(e){!function(e){u.firestore().collection("users/".concat(h,"/todos")).doc(e.id).delete()}(e),l===e&&m(!1)},x=Object(g.useSpring)({from:{marginTop:"-12px",opacity:0},to:{marginTop:"0px",opacity:1}}),p=Object(g.useTransition)(t.checked,{from:{position:"absolute",transform:"scale(0)"},enter:{transform:"scale(1)"},leave:{transform:"scale(0)"}});return Object(b.jsx)(g.animated.div,{style:x,className:"Todo",children:Object(b.jsxs)("div",{className:"todo-container",onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:[Object(b.jsx)("div",{className:"check-todo",onClick:function(){return function(e){u.firestore().collection("users/".concat(h,"/todos")).doc(e.id).update({checked:!e.checked})}(t)},children:p((function(e,c){return c?Object(b.jsx)(g.animated.span,{style:e,className:"checked",children:Object(b.jsx)(W.a,{color:"#bebebe"})}):Object(b.jsx)(g.animated.span,{style:e,className:"unchecked",children:Object(b.jsx)(q.a,{color:t.color})})}))}),Object(b.jsxs)("div",{className:"text",onClick:function(){return m(t)},children:[Object(b.jsx)("p",{style:{color:t.checked?"#bebebe":"#000000"},children:t.text}),Object(b.jsxs)("span",{children:[t.time," - ",t.projectName," - ",t.date]}),Object(b.jsx)("div",{className:"line ".concat(t.checked?"line-through":"")})]}),Object(b.jsx)("div",{className:"add-to-next-day",onClick:function(){return function(e){var t=d()(e.date,"DD/MM/YYYY").add(1,"days"),c=Object(r.a)(Object(r.a)({},e),{},{date:t.format("DD/MM/YYYY"),day:t.format("d"),checked:!1});delete c.id,u.firestore().collection("users/".concat(h,"/todos")).add(c)}(t)},children:t.checked&&Object(b.jsx)("span",{children:Object(b.jsx)(X.a,{})})}),Object(b.jsx)("div",{className:"delete-todo",onClick:function(){return f(t)},children:(a||t.checked)&&Object(b.jsx)("span",{children:Object(b.jsx)(Z.a,{})})})]})})};var ee=function(e){var t=e.todos,c=Object(n.useState)([]),s=Object(o.a)(c,2),a=s[0],r=s[1];return Object(n.useEffect)((function(){var e=["0","1","2","3","4","5","6"].map((function(e){return{todos:t.filter((function(t){return t.day===e})),number:e}})),c=parseInt(d()().format("d")),n=e.slice(c).concat(e.slice(0,c));r(n)}),[t]),Object(b.jsx)("div",{className:"Next7Days",children:a.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"day",children:[Object(b.jsxs)("div",{className:"name",children:[d()(e.number,"d").format("dddd"),e.number===d()().format("d")&&" (Today)"]}),Object(b.jsxs)("div",{className:"total-todos",children:["(",e.todos.length,")"]})]}),Object(b.jsx)("div",{className:"todos",children:e.todos.map((function(e){return Object(b.jsx)($,{todo:e},e.id)}))})]},e.number)}))})};var te=function(){var e=Object(n.useContext)(O),t=e.todos,c=e.selectedProject;return Object(b.jsxs)("div",{className:"Todos",children:[Object(b.jsx)("div",{className:"selected-project",children:c}),Object(b.jsx)("div",{className:"todos",children:"next 7 days"===c?Object(b.jsx)(ee,{todos:t}):t.map((function(e){return Object(b.jsx)($,{todo:e},e.id)}))})]})};var ce=function(){var e=Object(n.useContext)(O),t=e.selectedTodo,c=e.projects,s=e.UID,a=Object(n.useState)(""),r=Object(o.a)(a,2),i=r[0],j=r[1],l=Object(n.useState)(new Date),m=Object(o.a)(l,2),h=m[0],f=m[1],x=Object(n.useState)(new Date),p=Object(o.a)(x,2),v=p[0],g=p[1],N=Object(n.useState)(""),S=Object(o.a)(N,2),y=S[0],D=S[1];Object(n.useEffect)((function(){t&&(j(t.text),f(d()(t.date,"DD/MM/YYYY")),g(d()(t.time,"hh:mm A")),D(t.projectName))}),[t]),Object(n.useEffect)((function(){t&&u.firestore().collection("users/".concat(s,"/todos")).doc(t.id).update({text:i,date:d()(h).format("DD/MM/YYYY"),day:d()(h).format("d"),time:d()(v).format("hh:mm A"),projectName:y})}),[i,h,v,y]);var C=c.filter((function(e){return e.userID==s}));return Object(b.jsx)("div",{children:t&&Object(b.jsxs)("div",{className:"EditTodo",children:[Object(b.jsx)("div",{className:"header",children:"Edit Todo"}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(Y,{handleSubmit:function(e){},text:i,setText:j,day:h,setDay:f,time:v,setTime:g,todoProject:y,setTodoProject:D,projects:C})})]})})},ne=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(h,{children:[Object(b.jsx)(v,{}),Object(b.jsx)(A,{}),Object(b.jsx)(B,{}),Object(b.jsx)(Q,{})]}),Object(b.jsxs)(f,{children:[Object(b.jsx)(te,{}),Object(b.jsx)(ce,{})]})]})},se=c(165),ae=c.p+"static/media/wave.3eb81e26.svg",oe=function(){var e=Object(n.useContext)(O),t=(e.UID,e.setUID);void 0!=localStorage.getItem("UserId")?t(localStorage.getItem("UserId")):console.log("no user");var c=Object(se.a)(l),s=Object(o.a)(c,1)[0];return Object(b.jsx)("div",{className:"App",children:s?Object(b.jsx)(ne,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"small",children:Object(b.jsx)("h1",{children:" Sorry this application is not supported on smaller screens!"})}),Object(b.jsxs)("section",{id:"LoginPage",children:[Object(b.jsx)("h1",{children:"Alex Tran's TOOD's"}),Object(b.jsxs)("div",{onClick:function(){l.signInWithPopup(new u.auth.GoogleAuthProvider).then((function(e){t(e.user.uid,localStorage.setItem("UserId",e.user.uid))}))},className:"google-btn",children:[Object(b.jsx)("div",{className:"google-icon-wrapper",children:Object(b.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"})}),Object(b.jsx)("p",{className:"btn-text",children:Object(b.jsx)(b.Fragment,{children:"Sign in with google"})})]}),Object(b.jsx)("p",{className:"hometext",children:"Since this is my first firebase project, google authentication is used just for simplicity! P.s Try not to close the authentication window, it breaks the code (will fix later)."}),Object(b.jsx)("img",{src:ae})]})]})})},re=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,267)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),s(e),a(e),o(e)}))};a.a.render(Object(b.jsx)(m,{children:Object(b.jsx)(oe,{})}),document.getElementById("root")),re()}},[[214,1,2]]]);
//# sourceMappingURL=main.3de603ca.chunk.js.map